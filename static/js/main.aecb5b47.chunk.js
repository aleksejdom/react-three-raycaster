(this["webpackJsonpreact-three-raycaster"]=this["webpackJsonpreact-three-raycaster"]||[]).push([[0],{34:function(e,t,r){},35:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);var n=r(5),a=r.n(n),c=r(26),o=r.n(c),i=(r(34),r(35),r(15)),s=r(6),l=r(8),d={collidableObjects:[],keyboardEvent:null,pressed:!1,camera:{position:new l.Vector3(0,0,2),fov:100,near:.1,far:2e3,aspect:window.innerWidth/window.innerHeight},player:{speed:.025}};var b=r(9),u=function(e){var t=Object(n.useRef)(),r=Object(i.c)((function(e){return e.set}));return Object(n.useEffect)((function(){r({camera:t.current})}),[]),Object(i.b)((function(){t.current.updateMatrixWorld()})),Object(b.jsx)("perspectiveCamera",Object(s.a)({ref:t},e))},h=function(e){var t=Object(i.c)(),r=t.camera,a=t.gl;window.addEventListener("keydown",(function(e){d.pressed=!0,d.keyboardEvent=e}),!1),window.addEventListener("keyup",(function(e){d.pressed=!1,d.keyboardEvent=e}),!1);var c=Object(n.useRef)();return Object(n.useEffect)((function(){c.current.isMesh&&(c.current.health=100),r.aspect=d.camera.aspect,r.updateProjectionMatrix()})),Object(i.b)((function(){!function(e){if(d.pressed){var t=d.player.speed;37===d.keyboardEvent.keyCode&&(e.rotation.y+=t),39===d.keyboardEvent.keyCode&&(e.rotation.y-=t),38===d.keyboardEvent.keyCode&&e.translateZ(-t),40===d.keyboardEvent.keyCode?e.translateZ(t):32===d.keyboardEvent.keyCode&&(e.position.y+=t)}}(c.current),function(e){var t=d.collidableObjects;if(e.isMesh)for(var r=e.position.clone(),n=e.geometry.attributes.position,a=new l.Vector3,c=0,o=n.count;c<o;c++){a.fromBufferAttribute(n,c);var i=a.clone().applyMatrix4(e.matrix).sub(e.position),s=new l.Raycaster(r,i.clone().normalize()).intersectObjects(t);if(s.length>0&&s[0].distance<i.length()){console.log("Collision Detected"),e.health--,document.getElementById("healthLabel").firstChild.nodeValue="Health: "+e.health;break}}}(c.current)})),Object(b.jsxs)("mesh",{castShadow:!0,args:[r,a.domElement],ref:c,children:[Object(b.jsx)("sphereBufferGeometry",{args:[1,36,36],attach:"geometry"}),Object(b.jsx)("meshBasicMaterial",{color:16777215,attach:"material"}),Object(b.jsx)(u,{position:d.camera.position,fov:d.camera.fov,near:d.camera.near,far:d.camera.far,aspect:d.camera.aspect})]})},j=function(e){var t=Math.PI/2;return Object(b.jsxs)("mesh",{position:[0,-1,0],rotation:[t,0,0],children:[Object(b.jsx)("planeBufferGeometry",{args:[1e3,1e3,10,10]}),Object(b.jsx)("meshBasicMaterial",{color:2263842,side:l.DoubleSide})]})},f=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){var e=t.current;d.collidableObjects.push(e)}),[]),Object(b.jsxs)("mesh",{position:e.position,ref:t,children:[Object(b.jsx)("boxBufferGeometry",{attach:"geometry",args:[15,5]}),Object(b.jsx)("meshBasicMaterial",{attach:"material",color:10361370})]})};var p=function(){return Object(b.jsxs)("div",{style:{height:"100vh",width:"100vw"},children:[Object(b.jsx)("div",{id:"healthLabel",children:"Health: 100"}),Object(b.jsxs)(i.a,{gl:{powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1},shadowMap:!0,style:{background:"#000"},children:[Object(b.jsx)("ambientLight",{intensity:.1}),Object(b.jsx)(j,{}),Object(b.jsx)(f,{position:[-2,0,-5]}),Object(b.jsx)(h,{})]})]})},m=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,41)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root")),m()}},[[40,1,2]]]);
//# sourceMappingURL=main.aecb5b47.chunk.js.map